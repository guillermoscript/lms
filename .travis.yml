language: node_js
node_js:
  - 17

services:
  - docker

# safelist
branches:
  only:
  - master

before_script:
  - docker-compose up -d
  - docker-compose ps

script:
  - docker-compose exec postman run tests/Order-New-User.postman_collection.json -e tests/LMS-ENV-LOCAL.postman_environment.json
  - docker-compose exec postman run tests/Order-Existing-User.postman_collection.json -e tests/LMS-ENV-LOCAL.postman_environment.json

after_script:
  - docker-compose down